<?phpnamespace Database\Seeders;use App\Models\PayPeriod;use App\Models\Person;use App\Models\Position;use App\Models\SawingStation;use App\Models\SortingRotation;use Carbon\Carbon;use Illuminate\Database\Seeder;// use Illuminate\Database\Console\Seeds\WithoutModelEvents;class DatabaseSeeder extends Seeder{    /**     * Seed the application's database.     */    public function run(): void    {        Person::query()->create([            'name' => 'أدمن',            'tr_name' => 'Admin',            'phone' => '1234567890',            'username' => 'admin',            'password' => bcrypt('123'),            'role' => 'admin',        ]);        $payPeriod = PayPeriod::query()->create([            'start_date' => '2025-06-01',            'end_date' => '2025-06-30',            'is_active' => true,            'white_sorting_price' => 2.5,            'yellow_sorting_price' => 2.5,            'trimming_price' => 15,            'yellow_sawing_price' => 5,            'white_sawing_price' => 5,            'yellow_sorting_and_sawing_price' => 7,            'white_sorting_and_sawing_price' => 7,        ]);        SawingStation::query()->insert([            ['name' => 'منشار 1',],            ['name' => 'منشار 2',],            ['name' => 'منشار 3',],        ]);        $path = __DIR__ . '/init/init-people.csv';        $data = [];        if (($handle = fopen($path, 'r')) !== false) {            $header = fgetcsv($handle);            while (($row = fgetcsv($handle)) !== false) {                $data[] = array_combine($header, $row);            }            fclose($handle);        }        $today = Carbon::now()->toDateString();        foreach ($data as $row) {            $person = Person::query()->create([                'current_position_id' => 2,                'name' => $row['name'],                'tr_name' => $row['tr_name'],                'phone' => '',                'username' => !empty($row['username']) ? $row['username'] : null,                'password' => !empty($row['password']) ? bcrypt($row['password']) : null,                'role' => 'user',            ]);            $person->positions()->attach(2, [                'start_date' => $today,                'payment_type' => 'objective',                'salary' => null,            ]);        }        $payPeriod->sortingMissions()->create([            'assigned_person_id' => 2,            'date' => $today,            'start_time' => '08:00',            'end_time' => '17:00',            'status' => 'new',        ]);        $payPeriod->sortingMissions()->create([            'assigned_person_id' => 3,            'date' => $today,            'start_time' => '08:00',            'end_time' => '17:00',            'status' => 'new',        ]);//        tap(Person::query()->create([//            'current_position_id' => 2,//            'name' => 'زقار شعبان',//            'tr_name' => 'zougare chaaban',//            'phone' => '1234567890',//        ]), fn($person) => [//            $person->user()->create([//                'username' => 'zou',//                'password' => bcrypt('123'),//                'role' => 'user',//            ]),//            $person->positions()->attach(2, [//                'start_date' => '2025-05-15',//                'payment_type' => 'variable_salary',//            ]),//        ]);////        tap(Person::query()->create([//            'current_position_id' => 2,//            'name' => 'عبد الصمد',//            'tr_name' => 'Abd Samad',//            'phone' => '',//        ]), fn($person) => [//            $person->user()->create([//                'username' => 'abd',//                'password' => bcrypt('123'),//                'role' => 'user',//            ]),//            $person->positions()->attach(2, [//                'start_date' => '2025-05-15',//                'payment_type' => 'variable_salary',//            ]),//        ]);//        $startDate = Carbon::create(2025, 5, 15);//        for ($i = 0; $i < 1; $i++) {//            $date = $startDate->copy()->addDays($i)->toDateString();//            $payPeriod->sawingMissions()->create([//                'assigned_user_id' => 2,//                'date' => $date,//                'start_time' => '08:00',//                'end_time' => '17:00',//                'is_started' => false,//                'is_finished' => false,//            ]);//        }//        $startDate = Carbon::create(2025, 5, 15);//        for ($i = 0; $i < 2; $i++) {//            $date = $startDate->copy()->addDays($i)->toDateString();//            $payPeriod->sortingMissions()->create([//                'assigned_user_id' => 3,//                'date' => $date,//                'start_time' => '08:00',//                'end_time' => '17:00',//                'status' => $i == 0 ? 'finished' : 'new',//            ]);//        }////        $woman1 = Person::query()->create([//            'current_position_id' => 2,//            'name' => 'كواشي نادية',//            'tr_name' => 'Kaouachi Nadia',//            'phone' => '0505050555',//        ]);//        $woman1->positions()->attach(2, [//            'start_date' => '2025-05-27',//            'payment_type' => 'objective',//        ]);////        $woman2 = Person::query()->create([//            'current_position_id' => 2,//            'name' => 'زبيش نجاة',//            'tr_name' => 'Zebich Nadjat',//            'phone' => '0666666666',//        ]);//        $woman2->positions()->attach(2, [//            'start_date' => '2025-05-27',//            'payment_type' => 'objective',//        ]);////        SortingRotation::query()->insert([//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'yellow_sorting',//                'amount' => 78.60,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'yellow_sorting',//                'amount' => 47.10,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'yellow_sorting',//                'amount' => 53.90,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'yellow_sorting',//                'amount' => 88.50,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'white_sorting',//                'amount' => 10.70,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'white_sorting',//                'amount' => 29.30,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'trimming',//                'amount' => 11.20,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman1->id,//                'type' => 'trimming',//                'amount' => 14.70,//            ],//        ]);////        SortingRotation::query()->insert([//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'yellow_sorting',//                'amount' => 59.10,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'yellow_sorting',//                'amount' => 42.80,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'yellow_sorting',//                'amount' => 98.00,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'white_sorting',//                'amount' => 20.10,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'white_sorting',//                'amount' => 10.70,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'white_sorting',//                'amount' => 19.80,//            ],//            [//                'sorting_mission_id' => 1,//                'person_id' => $woman2->id,//                'type' => 'white_sorting',//                'amount' => 30.30,//            ]//        ]);////        $payPeriod->sortingMissions()->create([//            'assigned_user_id' => 2,//            'date' => $date,//            'start_time' => '08:00',//            'end_time' => '17:00',//            'status' => 'new',//        ]);    }}